(this.webpackJsonpwheel=this.webpackJsonpwheel||[]).push([[0],{148:function(e,t,n){},149:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(47),r=n.n(i),o=(n(148),n(149),n(150),n(174)),s=n(183),l=n(180),j=n(173),u=n(75),b=n(10),h=n(128),O=n(102),d=n(134),f=n(171),x=n(111),g=n(177),m=n(178),p=n(181),v=n(172),w=n(182),y=n(176),S=n(76),C=n(116),k=n.n(C),P=n(129);function M(){return(M=Object(P.a)(k.a.mark((function e(t){var n,c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder,c=n.encode(t),e.next=4,crypto.subtle.digest("SHA-256",c);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){(function(e){return M.apply(this,arguments)})(e).then((function(e){var n=Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("");n=n.slice(n.length-6,n.length);var c="#".concat(n),a="#".concat((16777215&~Number.parseInt(n,16)).toString(16));t([c,a])}))}var T=function(e){return"".concat((100*e).toFixed(2),"%")},A=function(e){return 1-e.reduce((function(e,t){return e+t.weight}),0)},F=function(e,t){return 1===t.filter((function(t){var n=t.title;return e===n})).length},N=n(3),E=Object(c.createContext)(null);function z(e){var t=e.children,n=Object(c.useState)(JSON.parse(localStorage.getItem("items"))||[]),a=Object(b.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)(JSON.parse(localStorage.getItem("history"))||[]),s=Object(b.a)(o,2),l=s[0],j=s[1],u=Object(c.useState)(A(i)),h=Object(b.a)(u,2),O=h[0],d=h[1],f={items:[i,r],history:[l,j],unassignedProbability:O};return Object(c.useEffect)((function(){var e=A(i);d(e),localStorage.setItem("items",JSON.stringify(i))}),[i]),Object(c.useEffect)((function(){localStorage.setItem("history",JSON.stringify(l))}),[l]),Object(N.jsx)(E.Provider,{value:f,children:t})}var R=1e-4,L=1e-4,D=function(e){return Math.abs(e)<1e-4},J=function(e){var t=e.index,n=e.title,a=e.fg,i=e.bg,r=e.weight,o=Object(c.useContext)(E),s=Object(b.a)(o.items,2),h=s[0],w=s[1],y=o.unassignedProbability,S=Object(c.useState)(!1),C=Object(b.a)(S,2),k=C[0],P=C[1],M=Object(c.useState)(!1),A=Object(b.a)(M,2),z=A[0],D=A[1],J=r+y,U=Object(c.useState)(n),B=Object(b.a)(U,2),G=B[0],H=B[1],q=Object(c.useState)(r),V=Object(b.a)(q,2),Y=V[0],W=V[1],K=Object(c.useState)([null,null]),Q=Object(b.a)(K,2),X=Q[0],Z=Q[1],$=Object(c.useState)(""),_=Object(b.a)($,2),ee=_[0],te=_[1],ne=Object(c.useState)(!1),ce=Object(b.a)(ne,2),ae=ce[0],ie=ce[1];Object(c.useEffect)((function(){if(n!==G&&F(G,h))return ie(!1),void te("It's already on the list");if(X[0]&&X[1]){var e=Object(u.a)(h),c=e[t];c.title=G,c.weight=Y;var a=Object(b.a)(X,2);c.fg=a[0],c.bg=a[1],w(e),ie(!1),D(!1)}}),[X]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(l.a.Row,{children:[Object(N.jsx)(l.a.Column,{width:14,children:Object(N.jsx)(O.a,{style:{color:a,backgroundColor:i,alignSelf:"flex-start"},size:"large",children:"".concat(t+1,") ").concat(n," (").concat(T(r),")")})}),Object(N.jsx)(l.a.Column,{width:2,children:Object(N.jsxs)(d.a.Group,{compact:!0,floated:"right",children:[Object(N.jsx)(d.a,{size:"mini",icon:"edit outline",onClick:function(){return D(!0)}}),Object(N.jsx)(d.a,{size:"mini",color:"red",icon:"delete",onClick:function(){return P(!0)}}),Object(N.jsx)(f.a,{open:k,onConfirm:function(){var e=h;e.splice(t,1),w(Object(u.a)(e)),P(!1)},onCancel:function(){return P(!1)}}),Object(N.jsxs)(x.a,{onClose:function(){return D(!1)},open:z,children:[Object(N.jsx)(x.a.Header,{children:"Edit"}),Object(N.jsxs)(x.a.Content,{children:[Object(N.jsxs)(g.a,{error:!0,children:[Object(N.jsxs)(g.a.Group,{inline:!0,children:[Object(N.jsx)(g.a.Field,{type:"text",control:"input",defaultValue:n,label:"Title",onChange:function(e){return H(e.target.value)}}),Object(N.jsx)(g.a.Field,{type:"range",control:"input",label:"Probability",min:R,max:J,step:L,defaultValue:r,onChange:function(e){return W(Number.parseFloat(e.target.value))}}),T(Y)]}),ee&&Object(N.jsx)(m.a,{error:!0,content:ee})]}),Object(N.jsx)(p.a,{active:ae,children:Object(N.jsx)(v.a,{content:"Saving"})})]}),Object(N.jsxs)(x.a.Actions,{children:[Object(N.jsx)(d.a,{color:"black",onClick:function(){return D(!1)},children:"Cancel"}),Object(N.jsx)(d.a,{content:"Save",labelPosition:"right",icon:"checkmark",onClick:function(){return ie(!0),void I(G,Z)},positive:!0})]})]})]})})]}),Object(N.jsx)(j.a,{fitted:!0})]})},U=function(){var e=Object(c.useContext)(E),t=Object(b.a)(e.items,2),n=t[0],a=t[1],i=e.unassignedProbability,r=Object(c.useState)(""),o=Object(b.a)(r,2),s=o[0],l=o[1],j=Object(c.useState)(R),O=Object(b.a)(j,2),d=O[0],f=O[1],x=Object(c.useState)([null,null]),p=Object(b.a)(x,2),v=p[0],w=p[1],y=Object(c.useState)(!1),S=Object(b.a)(y,2),C=S[0],k=S[1],P=Object(c.useState)(null),M=Object(b.a)(P,2),A=M[0],z=M[1];Object(c.useEffect)((function(){var e=Number.parseFloat(d);if(s&&e){if(D(i))return z("The total probability of specified events has reached 100%"),void k(!1);var t=Object(b.a)(v,2);t[0],t[1]}else k(!1)}),[s,d,v,i]);var J=Object(c.useCallback)(Object(h.debounce)((function(e){F(e,n)?z("It's already on the list"):(I(e,w),k(!0))}),300),[n]);return Object(N.jsxs)(g.a,{onSubmit:function(){var e=Object(b.a)(v,2),t=e[0],c=e[1],i={title:s,weight:d,fg:t,bg:c};a([].concat(Object(u.a)(n),[i])),l(""),f(R),k(!1),z(null)},error:!0,children:[Object(N.jsxs)(g.a.Group,{grouped:!0,children:[Object(N.jsx)(g.a.Input,{type:"text",label:"Title",placeholder:"thing to do",value:s,onChange:function(e){k(!1);var t=e.target.value;l(t),t?(z(""),J(t)):z("Title must be non-empty")}}),Object(N.jsx)(g.a.Field,{type:"range",control:"input",min:R,max:i,step:L,label:"Probability",value:d,onChange:function(e){return f(Number.parseFloat(e.target.value))}}),"".concat(T(d)),Object(N.jsx)(g.a.Button,{positive:!0,size:"large",disabled:!C,icon:"add"})," "]}),A&&Object(N.jsx)(m.a,{error:!0,content:A})]})},B=function(){var e=Object(c.useContext)(E),t=Object(b.a)(e.items,2),n=t[0],a=t[1],i=Object(b.a)(e.history,2),r=i[0],u=i[1],h=Object(c.useState)(!1),O=Object(b.a)(h,2),p=O[0],v=O[1],C=Object(c.useState)(!1),k=Object(b.a)(C,2),P=k[0],M=k[1],I=Object(c.useState)(""),T=Object(b.a)(I,2),A=T[0],F=T[1],z=Object(c.useState)(null),R=Object(b.a)(z,2),L=R[0],D=R[1],B=function(){L?fetch(L).then((function(e){return e.json()})).then((function(e){var t=e.items,n=e.history;a(t),u(n),M(!1)})).catch((function(){F("Failed to fetch specified URL or parse its contents as JSON")})):F("You should pick a file")},G=n.map((function(e,t){var n=e.title,c=e.fg,a=e.bg,i=e.weight;return Object(N.jsx)(J,{index:t,title:n,fg:c,bg:a,weight:i},t)}));return Object(N.jsxs)(w.a,{raised:!0,children:[Object(N.jsxs)(l.a,{children:[Object(N.jsx)(l.a.Column,{width:14,children:Object(N.jsx)(s.a,{size:"medium",content:"The things that are about to happen:"})}),Object(N.jsx)(l.a.Column,{width:2,children:Object(N.jsx)(y.a,{button:!0,icon:"wrench",className:"icon",fluid:!0,style:{textAlign:"center"},children:Object(N.jsxs)(y.a.Menu,{children:[Object(N.jsx)(y.a.Item,{icon:"download",text:"Import",onClick:function(){return M(!0)}}),Object(N.jsx)(y.a.Item,{icon:"upload",text:"Export",onClick:function(){var e={items:n,history:r},t=JSON.stringify(e),c=new Blob([t],{type:"application/json"}),a=document.createElement("a"),i=URL.createObjectURL(c);a.href=i,a.download="wheel.json",document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(i)}),0)}}),Object(N.jsx)(y.a.Item,{icon:"eraser",text:"Erase",onClick:function(){return v(!0)},as:d.a,fluid:!0,attached:"bottom",color:"red"}),Object(N.jsx)(f.a,{open:p,onCancel:function(){return v(!1)},onConfirm:function(){v(!1),a([]),u([])}}),Object(N.jsxs)(x.a,{open:P,onClose:function(){return M(!1)},onOpen:function(){return M(!0)},children:[Object(N.jsxs)(s.a,{icon:!0,children:[Object(N.jsx)(S.a,{name:"download"}),"Pick a file"]}),Object(N.jsx)(x.a.Content,{children:Object(N.jsxs)(o.a,{textAlign:"center",children:[Object(N.jsxs)(x.a.Description,{children:[Object(N.jsx)("p",{children:"Due to the restrictions caused by security reasons you cannot use local files directly and you have to upload it somewhere first."}),Object(N.jsx)("p",{children:"Note that there is no input file validation performed, so modifying it would be on your own risk."})]}),Object(N.jsx)(j.a,{}),Object(N.jsxs)(g.a,{error:!0,onSubmit:function(){return B()},children:[Object(N.jsx)(g.a.Input,{type:"text",label:"Link:",placeholder:"https://example.com/wheel.json",value:L,onChange:function(e){return D(e.target.value)}}),A&&Object(N.jsx)(m.a,{error:!0,content:A})]})]})}),Object(N.jsxs)(x.a.Actions,{children:[Object(N.jsxs)(d.a,{color:"red",inverted:!0,onClick:function(){return M(!1)},children:[Object(N.jsx)(S.a,{name:"remove"})," Cancel"]}),Object(N.jsxs)(d.a,{color:"green",inverted:!0,onClick:function(){return B()},children:[Object(N.jsx)(S.a,{name:"checkmark"})," OK"]})]})]})]})})})]}),Object(N.jsx)(j.a,{section:!0}),0===G.length?Object(N.jsx)(s.a,{textAlign:"center",size:"tiny",content:"Nothing's on the list yet"}):Object(N.jsx)(l.a,{children:G}),Object(N.jsx)(U,{})]})},G=function(e){var t=e.ts,n=e.title,c=e.weight;return Object(N.jsx)(l.a.Row,{columns:1,children:Object(N.jsx)(l.a.Column,{children:"".concat(function(e){return new Date(e).toLocaleString()}(t),": ").concat(n," (").concat(T(c),")")})})},H=function(){var e=Object(c.useContext)(E),t=Object(b.a)(e.history,1)[0].map((function(e){var t=e.ts,n=e.title,c=e.weight;return Object(N.jsx)(G,{ts:t,title:n,weight:c},Math.floor(t*Math.random()))}));return Object(N.jsx)(w.a,{raised:!0,children:Object(N.jsxs)(o.a,{children:[Object(N.jsx)(s.a,{size:"medium",textAlign:"center",content:"History of spins:"}),0===t.length?Object(N.jsx)(s.a,{textAlign:"center",size:"tiny",content:"Empty"}):Object(N.jsx)(l.a,{children:t})]})})},q=n(132),V=n(175),Y=function(){var e=Object(c.useContext)(E),t=Object(b.a)(e.items,1)[0],n=Object(b.a)(e.history,2),a=n[0],i=n[1],r=e.unassignedProbability,o=Math.floor(.5*window.innerWidth),l=o,j=Object(c.useState)({title:null,weight:null}),h=Object(b.a)(j,2),O=h[0],f=h[1],g=Object(c.useState)(!1),m=Object(b.a)(g,2),p=m[0],v=m[1],y=Object(c.useState)(Math.PI),S=Object(b.a)(y,2),C=S[0],k=S[1],P=Object(c.useState)(!1),M=Object(b.a)(P,2),I=M[0],A=M[1],F=Object(c.useRef)(null),z=function(e){var n,c,r=C,o=300,s=6e-7,l=Math.PI*(1-2*(t.slice(0,e).map((function(e){return e.weight})).reduce((function(e,t){return e+t}),0)+t[e].weight*Math.random())),j=(n=12,c=16,n=Math.ceil(n),c=Math.floor(c),Math.floor(Math.random()*(c-n)+n)*(2*Math.PI)+l),b=.5*(Math.sqrt(3.24e-8+8*(j-r)*s)-s*o)/o,h=F.current.getContext("2d"),O=performance.now();A(!0),window.requestAnimationFrame((function n(c){var d=function(e){if(e<o)return b*e*e/2+r;var t=b*o;return e>o+t/s?j:-s*(e-o)*(e-o)/2+t*(e-o)+(b*o*o/2+r)}(c-O);if(R(h,d),Math.abs(j-d)>.001)window.requestAnimationFrame(n);else{k(l),v(!0),A(!1);var f=t[e],x=f.title,g=f.weight,m={ts:Date.parse(Date()),title:x,weight:g};i([m].concat(Object(u.a)(a)))}}))},R=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=o/60,a=5,i="#000000",r="#d2f1d9",s="#cece00",j="#fefe00",u=o/30,b=l/20,h=o/2-a-c,O=o/2,d=l/2,f=Math.round(.8*h),x=10,g=100;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,o,l),e.translate(O,d),e.rotate(n+Math.PI/2),e.fillStyle=i,e.beginPath(),e.arc(0,0,h+a,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=r,e.beginPath(),e.arc(0,0,h,0,2*Math.PI),e.closePath(),e.fill();var m,p=Object(q.a)(t);try{for(p.s();!(m=p.n()).done;){var v=m.value,w=v.title,y=v.weight,S=v.fg,C=v.bg,k=2*Math.PI*y,P=Math.min(g,1.6*(h-f/2)*Math.sin(Math.min(k/2,Math.PI/2))),M=Math.floor(Math.log2(g-x));e.fillStyle=C,e.strokeStype=i,e.beginPath(),e.arc(0,0,h,0,k),e.lineTo(0,0),e.closePath(),e.fill(),e.stroke(),e.rotate(k/2),e.fillStyle=S;var I=Math.round((P-x)/2),T=I/2;if(P>x){for(var A=0;A<M;A++){e.font="".concat(I,"px Verdana");var F=e.measureText(w).width;if(F===f)break;F<f?I+=T:I-=T,T/=2}F=e.measureText(w).width;var N=e.measureText("M").width;e.fillText(w,h/2-F/2,N/2)}e.rotate(k/2)}}catch(E){p.e(E)}finally{p.f()}e.setTransform(1,0,0,1,0,0),e.fillStyle=s,e.strokeStyle=i,e.beginPath(),e.moveTo(o/2-u,0),e.lineTo(o/2,b/3),e.lineTo(o/2,b),e.closePath(),e.fill(),e.stroke(),e.fillStyle=j,e.beginPath(),e.moveTo(o/2+u,0),e.lineTo(o/2,b/3),e.lineTo(o/2,b),e.closePath(),e.fill(),e.stroke()};return Object(c.useEffect)((function(){var e=F.current.getContext("2d");R(e,C)}),[t]),Object(N.jsxs)(w.a,{raised:!0,children:[Object(N.jsx)(V.a,{attached:!0,internal:!0,position:"left",close:"very",children:Object(N.jsx)(w.a,{compact:!0,children:Object(N.jsx)(s.a,{as:"h3",textAlign:"center",content:"Drag the wheel!"})})}),Object(N.jsxs)("canvas",{ref:F,onClick:function(){if(!I)if(D(r)){var e=function(e){for(var t=0,n=Math.random(),c=0;c<e.length;c++){var a=e[c],i=a.title,r=a.weight;if(n<=(t+=r))return{title:i,weight:r,index:c}}}(t),n=e.title,c=e.weight,a=e.index;f({title:n,weight:c}),z(a)}else alert("You have to fully assign the remaining probability of ".concat(T(r)," before spinning!"))},width:"".concat(o,"px"),height:"".concat(l,"px"),children:[" ","Your browser does not seem to be supporting Canvas API"]}),Object(N.jsxs)(x.a,{open:p,onClose:function(){return v(!1)},children:[Object(N.jsx)(x.a.Header,{content:"Result"}),Object(N.jsx)(x.a.Content,{children:Object(N.jsx)(x.a.Description,{children:Object(N.jsx)(s.a,{size:"huge",textAlign:"center",content:"".concat(O.title," (").concat(T(O.weight),")")})})}),Object(N.jsx)(x.a.Actions,{children:Object(N.jsx)(d.a,{content:"Great!",labelPosition:"right",icon:"checkmark",onClick:function(){return v(!1)},positive:!0})})]})]})},W=function(){return Object(N.jsxs)(o.a,{fluid:!0,className:"main-container",children:[Object(N.jsx)(s.a,{size:"huge",textAlign:"center",children:Object(N.jsx)(s.a.Content,{children:"Wheel of Unfortunate"})}),Object(N.jsxs)(l.a,{columns:2,children:[Object(N.jsx)(l.a.Column,{width:10,textAlign:"center",children:Object(N.jsx)(Y,{})}),Object(N.jsx)(l.a.Column,{width:6,children:Object(N.jsx)(B,{})})]}),Object(N.jsx)(j.a,{horizontal:!0}),Object(N.jsx)(o.a,{children:Object(N.jsx)(H,{})})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(z,{children:Object(N.jsx)(W,{})})}),document.getElementById("root")),K()}},[[159,1,2]]]);
//# sourceMappingURL=main.48e5528b.chunk.js.map